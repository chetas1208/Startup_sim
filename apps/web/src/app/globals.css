@tailwind base;
@tailwind components;
@tailwind utilities;

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');

/* ============================================================================
   CSS VARIABLES - THEME TOKENS
   ============================================================================ */

:root {
  /* Light Mode */
  --bg: 250 250 250; /* zinc-50 */
  --card: 255 255 255;
  --muted: 244 244 245; /* zinc-100 */
  --border: 228 228 231; /* zinc-200 */
  --text-primary: 24 24 27; /* zinc-900 */
  --text-secondary: 82 82 91; /* zinc-600 */
  --accent: 79 70 229; /* indigo-600 */
  --accent-hover: 67 56 202; /* indigo-700 */
  --accent-soft: 238 242 255; /* indigo-50 */
  --success: 5 150 105; /* emerald-600 */
  --warning: 245 158 11; /* amber-500 */
  --danger: 225 29 72; /* rose-600 */
}

.dark {
  /* Dark Mode */
  --bg: 9 9 11; /* zinc-950 */
  --card: 24 24 27; /* zinc-900 */
  --muted: 39 39 42; /* zinc-800 */
  --border: 39 39 42; /* zinc-800 */
  --text-primary: 244 244 245; /* zinc-100 */
  --text-secondary: 161 161 170; /* zinc-400 */
  --accent: 99 102 241; /* indigo-500 */
  --accent-hover: 129 140 248; /* indigo-400 */
  --accent-soft: 49 46 129; /* indigo-900 */
  --success: 16 185 129; /* emerald-500 */
  --warning: 251 191 36; /* amber-400 */
  --danger: 244 63 94; /* rose-500 */
}

/* ============================================================================
   BASE STYLES
   ============================================================================ */

@layer base {
  * {
    @apply transition-colors duration-200;
  }

  html {
    scroll-behavior: smooth;
  }

  body {
    font-family: 'Inter', system-ui, -apple-system, sans-serif;
    font-size: 16px;
    line-height: 1.5;
    background-color: rgb(var(--bg));
    color: rgb(var(--text-primary));
  }

  h1 {
    font-size: 1.875rem;
    font-weight: 600;
    line-height: 1.25;
  }

  h2 {
    font-size: 1.25rem;
    font-weight: 600;
    line-height: 1.375;
  }

  h3 {
    font-size: 1.125rem;
    font-weight: 600;
  }

  h4 {
    font-size: 1rem;
    font-weight: 600;
  }

  p {
    font-size: 1rem;
    line-height: 1.625;
    color: rgb(var(--text-primary));
  }

  small {
    font-size: 0.875rem;
    color: rgb(var(--text-secondary));
  }

  /* Selection */
  ::selection {
    background-color: rgb(var(--accent));
    color: white;
  }

  /* Scrollbar */
  ::-webkit-scrollbar {
    width: 0.5rem;
    height: 0.5rem;
  }

  ::-webkit-scrollbar-track {
    background-color: rgb(var(--muted));
  }

  ::-webkit-scrollbar-thumb {
    background-color: rgb(var(--border));
    border-radius: 9999px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background-color: rgb(var(--text-secondary));
  }

  /* Focus Ring */
  :focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px rgb(var(--accent)), 0 0 0 4px rgb(var(--bg));
  }
}

/* ============================================================================
   COMPONENT CLASSES
   ============================================================================ */

@layer components {
  /* CARDS */
  .card {
    @apply rounded-2xl p-6 shadow-sm transition-all;
    background-color: rgb(var(--card));
    border: 1px solid rgb(var(--border));
  }

  .dark .card {
    box-shadow: none;
  }

  .card-hover {
    @apply rounded-2xl p-6 shadow-sm cursor-pointer transition-all;
    background-color: rgb(var(--card));
    border: 1px solid rgb(var(--border));
  }

  .card-hover:hover {
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    border-color: rgb(var(--text-secondary));
  }

  .dark .card-hover {
    box-shadow: none;
  }

  .card-interactive {
    @apply rounded-2xl p-6 shadow-sm transition-colors;
    background-color: rgb(var(--card));
    border: 1px solid rgb(var(--border));
  }

  .dark .card-interactive {
    box-shadow: none;
  }

  .card-interactive:hover {
    background-color: rgb(var(--muted));
  }

  /* SECTION HEADER */
  .section-header {
    margin-bottom: 1.5rem;
  }

  .section-header h2 {
    font-size: 1.25rem;
    font-weight: 600;
    color: rgb(var(--text-primary));
    margin-bottom: 0.5rem;
  }

  .section-header p {
    font-size: 0.875rem;
    color: rgb(var(--text-secondary));
  }

  /* BUTTONS */
  .btn {
    @apply inline-flex items-center justify-center font-medium rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px rgb(var(--accent)), 0 0 0 4px rgb(var(--bg));
  }

  .btn-primary {
    @apply btn text-white active:scale-95;
    background-color: rgb(var(--accent));
  }

  .btn-primary:hover {
    background-color: rgb(var(--accent-hover));
  }

  .btn-primary-lg {
    @apply btn-primary px-6 py-3 text-base;
  }

  .btn-primary-md {
    @apply btn-primary px-5 py-2.5 text-sm;
  }

  .btn-primary-sm {
    @apply btn-primary px-4 py-2 text-sm;
  }

  .btn-secondary {
    @apply btn active:scale-95;
    background-color: rgb(var(--card));
    border: 1px solid rgb(var(--border));
    color: rgb(var(--text-primary));
  }

  .btn-secondary:hover {
    background-color: rgb(var(--muted));
  }

  .btn-secondary-lg {
    @apply btn-secondary px-6 py-3 text-base;
  }

  .btn-secondary-md {
    @apply btn-secondary px-5 py-2.5 text-sm;
  }

  .btn-secondary-sm {
    @apply btn-secondary px-4 py-2 text-sm;
  }

  .btn-ghost {
    @apply btn active:scale-95;
    color: rgb(var(--accent));
  }

  .btn-ghost:hover {
    background-color: rgb(var(--accent-soft) / 0.5);
  }

  .btn-ghost-md {
    @apply btn-ghost px-4 py-2 text-sm;
  }

  .btn-ghost-sm {
    @apply btn-ghost px-3 py-1.5 text-sm;
  }

  .btn-icon {
    @apply btn p-2;
    color: rgb(var(--text-secondary));
  }

  .btn-icon:hover {
    color: rgb(var(--text-primary));
    background-color: rgb(var(--muted));
  }

  /* INPUTS */
  .input {
    @apply w-full px-4 py-2.5 rounded-lg transition-all;
    background-color: rgb(var(--card));
    border: 1px solid rgb(var(--border));
    color: rgb(var(--text-primary));
  }

  .input::placeholder {
    color: rgb(var(--text-secondary));
  }

  .input:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px rgb(var(--accent));
    border-color: transparent;
  }

  .input-lg {
    @apply px-5 py-3 text-base;
  }

  .input-sm {
    @apply px-3 py-2 text-sm;
  }

  .textarea {
    @apply input resize-none;
  }

  /* BADGES */
  .badge {
    @apply inline-flex items-center px-3 py-1.5 rounded-full text-xs font-medium;
  }

  .badge-success {
    @apply badge bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-300;
  }

  .badge-warning {
    @apply badge bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300;
  }

  .badge-danger {
    @apply badge bg-rose-100 dark:bg-rose-900/30 text-rose-700 dark:text-rose-300;
  }

  .badge-neutral {
    @apply badge bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300;
  }

  .badge-accent {
    @apply badge bg-accent-soft dark:bg-accent-soft text-accent dark:text-indigo-300;
  }

  /* STATUS BADGES */
  .status-go {
    @apply badge bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-300 font-semibold;
  }

  .status-no-go {
    @apply badge bg-rose-100 dark:bg-rose-900/30 text-rose-700 dark:text-rose-300 font-semibold;
  }

  .status-pivot {
    @apply badge bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300 font-semibold;
  }

  /* TABLES */
  .table-container {
    @apply overflow-x-auto rounded-xl;
    border: 1px solid rgb(var(--border));
  }

  .table-header {
    @apply px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider;
    background-color: rgb(var(--muted));
    color: rgb(var(--text-secondary));
    border-bottom: 1px solid rgb(var(--border));
  }

  .table-row {
    @apply transition-colors;
    border-bottom: 1px solid rgb(var(--border));
  }

  .table-row:hover {
    background-color: rgb(var(--muted));
  }

  .table-row:nth-child(even) {
    background-color: rgb(var(--muted) / 0.5);
  }

  .table-cell {
    @apply px-6 py-4 text-sm;
    color: rgb(var(--text-primary));
  }

  /* STEP INDICATOR */
  .step-indicator {
    @apply flex items-center;
  }

  .step-number {
    @apply flex items-center justify-center w-8 h-8 rounded-full text-sm font-semibold;
  }

  .step-number-active {
    @apply step-number text-white;
    background-color: rgb(var(--accent));
  }

  .step-number-completed {
    @apply step-number text-white;
    background-color: rgb(var(--success));
  }

  .step-number-pending {
    @apply step-number;
    background-color: rgb(var(--muted));
    color: rgb(var(--text-secondary));
  }

  .step-line {
    @apply flex-1 h-1 mx-2;
    background-color: rgb(var(--border));
  }

  .step-line-completed {
    @apply step-line;
    background-color: rgb(var(--success));
  }

  /* CITATION CARD */
  .citation-card {
    @apply rounded-2xl p-4 shadow-sm transition-all;
    background-color: rgb(var(--card));
    border: 1px solid rgb(var(--border));
    border-left: 4px solid rgb(var(--accent));
  }

  .dark .citation-card {
    box-shadow: none;
  }

  .citation-title {
    @apply text-sm font-semibold mb-1;
    color: rgb(var(--text-primary));
  }

  .citation-source {
    @apply text-xs mb-2;
    color: rgb(var(--text-secondary));
  }

  .citation-snippet {
    @apply text-sm line-clamp-2 mb-3;
    color: rgb(var(--text-secondary));
  }

  .citation-link {
    @apply text-xs font-medium;
    color: rgb(var(--accent));
  }

  .citation-link:hover {
    color: rgb(var(--accent-hover));
  }

  /* CODE BLOCK */
  .code-block {
    @apply p-4 rounded-lg font-mono text-sm overflow-x-auto;
    background-color: #18181b;
    color: #fafafa;
    border: 1px solid #3f3f46;
  }

  .code-block code {
    color: #fafafa;
  }

  /* SCORECARD */
  .scorecard {
    @apply rounded-2xl p-6 shadow-sm transition-all space-y-6;
    background-color: rgb(var(--card));
    border: 1px solid rgb(var(--border));
  }

  .dark .scorecard {
    box-shadow: none;
  }

  .scorecard-item {
    @apply flex items-center justify-between pb-4 last:border-b-0 last:pb-0;
    border-bottom: 1px solid rgb(var(--border));
  }

  .scorecard-label {
    @apply text-sm font-medium;
    color: rgb(var(--text-secondary));
  }

  .scorecard-value {
    @apply text-2xl font-bold;
    color: rgb(var(--accent));
  }

  .scorecard-bar {
    @apply w-full h-2 rounded-full overflow-hidden;
    background-color: rgb(var(--muted));
  }

  .scorecard-bar-fill {
    @apply h-full rounded-full transition-all;
    background-color: rgb(var(--accent));
  }

  /* DIVIDER */
  .divider {
    border-top: 1px solid rgb(var(--border));
  }

  /* PROSE */
  .prose {
    color: rgb(var(--text-primary));
  }

  .prose h1 {
    @apply text-3xl font-semibold mb-4 mt-6 first:mt-0;
  }

  .prose h2 {
    @apply text-xl font-semibold mb-3 mt-5;
  }

  .prose h3 {
    @apply text-lg font-semibold mb-2 mt-4;
  }

  .prose p {
    @apply mb-4 leading-relaxed;
  }

  .prose ul,
  .prose ol {
    @apply mb-4 ml-6;
  }

  .prose li {
    @apply mb-2;
  }

  .prose a {
    @apply underline;
    color: rgb(var(--accent));
  }

  .prose a:hover {
    color: rgb(var(--accent-hover));
  }

  .prose code {
    @apply px-2 py-1 rounded text-sm font-mono;
    background-color: rgb(var(--muted));
    color: rgb(var(--accent));
  }

  .prose pre {
    @apply p-4 rounded-lg overflow-x-auto mb-4;
    background-color: #18181b;
    color: #fafafa;
  }

  .prose pre code {
    @apply bg-transparent p-0;
    color: #fafafa;
  }

  .prose blockquote {
    @apply pl-4 italic my-4;
    border-left: 4px solid rgb(var(--accent));
    color: rgb(var(--text-secondary));
  }

  .prose table {
    @apply w-full border-collapse;
  }

  .prose th {
    @apply px-4 py-2 text-left font-semibold;
    background-color: rgb(var(--muted));
    border: 1px solid rgb(var(--border));
  }

  .prose td {
    @apply px-4 py-2;
    border: 1px solid rgb(var(--border));
  }

  /* UTILITY CLASSES */
  .text-primary {
    color: rgb(var(--text-primary));
  }

  .text-secondary {
    color: rgb(var(--text-secondary));
  }

  .text-accent {
    color: rgb(var(--accent));
  }

  .bg-accent-soft {
    background-color: rgb(var(--accent-soft));
  }

  .border-accent {
    border-color: rgb(var(--accent));
  }

  .line-clamp-1 {
    @apply overflow-hidden text-ellipsis whitespace-nowrap;
  }

  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* LAYOUT */
  .container-max {
    @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
  }

  .container-md {
    @apply max-w-4xl mx-auto px-4 sm:px-6;
  }

  .container-sm {
    @apply max-w-2xl mx-auto px-4;
  }

  /* SPACING UTILITIES */
  .space-y-section {
    @apply space-y-8;
  }

  .space-x-section {
    @apply space-x-8;
  }

  /* GRID */
  .grid-cols-auto {
    @apply grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6;
  }

  .grid-cols-2-auto {
    @apply grid grid-cols-1 md:grid-cols-2 gap-6;
  }
}
